<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Document</title>
	<style type="text/css">
	*{
		margin: 0;
		padding:0;
	}
	.u1{
		width: 1000px;
		height: 30px;
		position: absolute;
		border-radius: 15px;
		border: 5px solid #666;
		top: 7px;
		left: 50px;
		z-index: 10;
	}
	.u2{
		width: 1000px;
		height: 30px;
		position: absolute;
		top: 0px;
		left: 0px;
		background-color:yellow;
		z-index: 11;
	}
	.u3{
		width: 5px;
		height: 30px;
		background-color: #fff;
		position: relative;
		float: left;
		z-index: 1222;
		margin-left: 95px;
	}
	body{
		overflow: hidden;
	}
	.u5{
		width: 2200px;
		margin: 0 auto;
		display: block;
	}
	.u6{
		width: 50px;
		height: 50px;
		position: absolute;
		top: px;
		left: 20px;
		z-index: 200;
		display: block;
	}
	.u7{
		width: 600px;
		height: 100px;
		font-size: 70px;
		box-shadow: 10px 10px 20px #333;
		background-color: green;
		text-align: center;
		line-height: 100px;
		position:absolute;
		top: 40%;
		margin-left: -300px;
		left: 50%;
		border:3px solid #888;
		color: #fff;
		border-radius: 50px; 
		cursor: pointer;
		z-index: 99999999;
		font-weight: bold;
		}
		#u8{
			width: 100%;
			height:100%;
			background-color: rgba(12,31,61,0.6);
			position: absolute;
			z-index: 9999;
			display: block;
			top: 0px;
			left: 0px;
		}
		.u9{
			width:800px;
			height: 100px;
			color: #fff;
			font-size: 30px;
			position: absolute;
			top: 20%;
			left: 50%;
			text-align: center;
			line-height: 100px;
			margin-left: -400px;
			display: block;
			z-index: 9999999999;
		}
		.u10{
			width: 100%;
			height:50px;
			background-color: #000;
			position: fixed;
			bottom: 0px;
			left: 0px;
			color: #fff;
			font-size: 30px;
			text-align:left;
			border-top: 8px solid red;
		}
		.uu1{
			width: 720px;
			height: 30px;
			background-color: rgba(255,30,80,0.6);
			position: absolute;
			z-index: 9999999999;
			font-size: 25px;
			font-weight: bold;
			top: 5%;
			left: -720px;
		}
		.uu2{
			width: 250px;
			height: 100px;
			border-radius: 50px;
			background-color: red;
			position: absolute;
			top: 10px;
			right: 10px;
			z-index: 99999999;
			line-height: 100px;
			text-align: center;
			font-size: 46px;
			color: #fff;
		}
		.uu3{
			width: 400px;
			height: 80px;
			text-align: center;
			line-height: 80px;
			font-size: 50px;
			color: #fff;
			position: absolute;
			top: 10px;
			left: 60%;
			font-weight: bold;
		}
	</style>
</head>
<body>
	<img src="5710532c4e674.jpg" class="u5">
	<img src="81e58PICS42_1024.png" class="u6">
	<div class="u1">
		<div class="u2"></div>

		<div class="u3"></div>
		<div class="u3"></div>
		<div class="u3"></div>
		<div class="u3"></div>
		<div class="u3"></div>
		<div class="u3"></div>
		<div class="u3"></div>
		<div class="u3"></div>
		<div class="u3"></div>
	</div>

	<div class="uu1">提示：亲，每关只要击中10个就胜利哦，一共5关，加油！！！</div>
	<div class="u9">来战“一念永恒”，体岁月沧海桑田，看世事枯骨遍野!!!<br/> 有惊喜大奖，等你拿...快来吧！还等什么</div>

	<div class="u10">&nbsp;游戏技巧：&nbsp;优先按 'B', 'X', 'C' 可以恢复生命值...切记,切记!!!</div>

	<div class="u7"> 开始游戏 >></div>
	<div id="u8"></div>
	<div class="uu3">第一关   共五关</div>
	<div class="uu2">积分榜:0</div>
</body>
</html>
<script type="text/javascript" src="animate.js"></script>
<script>
	function game(){
		this.letterArr=['A','B','C','D','E','F','G','H','M','J','K','L','M','N','O','P','Q','R','S','T','Y','V','W','X','Y','Z'];
		this.len=5;
		this.speed=5;
		this.hp=10;
		this.currentArr=[];
		this.shengli=0;
		this.windowh=document.documentElement.clientHeight;
		this.chongxingkaishi=false;
		this.num=0;
		this.positionsss=[];
	}
	game.prototype={



		play:function(){
			var self=this;
			var ht=document.getElementsByClassName('uu1')[0];
			var tt=window.setInterval(function(){
				var po=ht.offsetLeft;
				var po1=parseInt(document.documentElement.clientWidth);
				if(po>=po1){
					ht.style.left=-720+'px';
				}
				ht.style.left=po+20+'px';

			},100);
				alert('\b   " 一 念 永 恒 "  ,\n\n\n第1关开始！！！');
				for(var i=0;i<self.len;i++){
					var range=Math.floor(Math.random()*26);
					var k=document.createElement('div');
					k.style.cssText='width:100px;height:100px;background-image:url(5030857fd7147.jpg);background-size:100px;text-align:center;line-height:100px;font-size:45px;color:red;position:absolute;border-radius:100px;font-weight:bold';
					var tops=Math.floor(Math.random()*500);
					var lefts=Math.floor(Math.random()*1920);
					k.innerHTML=self.letterArr[range];
					


					while(self.fnng(lefts,100,self.positionsss)){
						lefts=Math.floor(Math.random()*1920);
					}


					self.positionsss.push({'minx':lefts,'manx':lefts+100});
					k.style.top=-tops+'px';
					k.style.left=lefts+'px';

					self.currentArr.push(k);
					document.body.appendChild(k);
						for(var j=0;j<self.currentArr.length;j++){
							while(self.letterArr[range]==self.currentArr[i].innerHTML){
								var range=Math.floor(Math.random()*26);
								j=0;
							}
						}


				}
				
			self.getLetter();
			self.key();
		},



		getLetter:function(){
			self=this;

			var pp=window.setInterval(function(){
				console.dir(self.positionsss[i]);
				for(var i=0;i<self.currentArr.length;i++){
					var n=self.currentArr[i].offsetTop;
					self.currentArr[i].style.top=n+self.speed+'px';
					if(parseInt(self.currentArr[i].style.top)>=self.windowh-200){
						document.body.removeChild(self.currentArr[i]);
						self.positionsss.splice(i,1);

						self.hp-=1;
						
							var hpt=document.getElementsByClassName('u2')[0];
					switch(self.hp){
					case 0:;animate(hpt,{'width':0});break;
					case 1:;animate(hpt,{'width':95});break;
					case 2:;animate(hpt,{'width':190});break;
					case 3:;animate(hpt,{'width':285});break;
					case 4:;animate(hpt,{'width':380});break;
					case 5:;animate(hpt,{'width':475});break;
					case 6:;animate(hpt,{'width':570});break;
					case 7:;animate(hpt,{'width':665});break;
					case 8:;animate(hpt,{'width':760});break;
					case 9:;animate(hpt,{'width':855});break;
					case 10:;animate(hpt,{'width':1000});break;
}

						// 去重
						var range=Math.floor(Math.random()*26);
						for(var j=0;j<self.currentArr.length;j++){


							while(self.letterArr[range]==self.currentArr[j].innerHTML){
								var range=Math.floor(Math.random()*26);
								j=0;
							}
						}


						var k=document.createElement('div');
							k.style.cssText='width:100px;height:100px;background-image:url(5030857fd7147.jpg);background-size:100px;text-align:center;line-height:100px;font-size:45px;color:red;position:absolute;border-radius:100px;font-weight:bold';
						var tops=Math.floor(Math.random()*100);
						var lefts=Math.floor(Math.random()*1920);
						k.innerHTML=self.letterArr[range];



						while(self.fnng(lefts,100,self.positionsss)){
							lefts=Math.floor(Math.random()*1920);
						}

						self.positionsss.push({'minx':lefts,'manx':lefts+100});
						k.style.top=-tops+'px';
						k.style.left=lefts+'px';
						self.currentArr[i]=k;
						document.body.appendChild(k);
						if(self.hp<=0){
							window.clearInterval(pp);
							var mn=document.createElement('div');
							mn.cssText='position:absolute;top:50%;left:50%;margin-top:-150px;margin-left:-150px;border-radius:100px;font-weight:bold;border-radius:100px;';
							self.chongxingkaishi=confirm('你在游戏排行榜:'+self.shengli+'\n\n亲,是否要重新开始？yes/no');
						}
						if(self.chongxingkaishi){
							self.hp=10;
							self.chongxingkaishi=false;
							history.go(0);
							self.play();
						}
	 				}
	 			
				}
				
				

			},50);
		
		},
		key:function(){
			self=this;
			document.body.onkeydown=function(e){
				for(var i=0;i<self.currentArr.length;i++){
					var nn=String.fromCharCode(e.keyCode);
					if(nn==self.currentArr[i].innerHTML){
						document.body.removeChild(self.currentArr[i]);
						self.currentArr.splice(i,1);
						// 去重
						self.positionsss.splice(i,1);
						var range=Math.floor(Math.random()*26);
						for(var j=0;j<self.currentArr.length;j++){

							while(self.letterArr[range]==self.currentArr[j].innerHTML){
								var range=Math.floor(Math.random()*26);
								j=0;
							}
						}

						
						self.shengli++;
						var uu2=document.getElementsByClassName('uu2')[0];
						uu2.innerHTML='积分榜:'+self.shengli;
						var k=document.createElement('div');
						k.style.cssText='width:100px;height:100px;background-image:url(5030857fd7147.jpg);background-size:100px;text-align:center;line-height:100px;font-size:45px;color:red;position:absolute;border-radius:100px;font-weight:bold';
						var tops=Math.floor(Math.random()*100);
						var lefts=Math.floor(Math.random()*1920);



						while(self.fnng(lefts,100,self.positionsss)){
							lefts=Math.floor(Math.random()*1920);
						}


						self.positionsss.push({'minx':lefts,'manx':lefts+500});

						k.innerHTML=self.letterArr[range];
						k.style.top=-tops+'px';
						k.style.left=lefts+'px';
						self.currentArr.push(k);
						var uu3=document.getElementsByClassName('uu3')[0];
						document.body.appendChild(k);
						if(nn=='B'||nn=='X'||nn=='C'){
							self.hp++;
						}
						self.num++;
						if(self.num==10){
							alert('恭喜 “青莲神火” 功法小成,请进入第2关!!!');
							uu3.innerHTML='第二关   共五关';
							self.speed+=3;
						}
						if(self.num==50){
							alert('恭喜你成为 “逆河宗” 外门弟子，请进第3关！！！');
							uu3.innerHTML='第三关   共五关';
							self.speed+=6;
						}
						if(self.num==60){
							alert('恭喜你成为 “逆河宗” 内门弟子，请进第4关！！！');
							uu3.innerHTML='第四关   共五关';
							self.speed+=7;
						}
						if(self.num==70){
							alert('恭喜你成为 “逆河宗” 大长老，请进第5关！！！');
							uu3.innerHTML='第五关   共五关';
							self.speed+=8;
						}
						if(self.num==80){
							alert('参见 “少祖” ，\n\n血溪血子，威震八方 ; 灵溪少祖，天下无敌\n');
							uu3.innerHTML='闯关成功';
							self.speed+=9;
						}
						console.dir(self.speed);
					}
				
			}
		}
	},
	fnng:function(l,w,arr){
		for(var i=0;i<arr.length;i++){
			if(arr[i].manx<l||(l+w)<arr[i].minx){
				return true;
			}
		}
		return false;
	}
}



var game=new game();
var btn=document.getElementsByClassName('u7')[0];
var btn1=document.getElementById('u8');
var btn2=document.getElementsByClassName('u9')[0];
btn.onclick=function(){
	btn2.style.display='none'
	btn1.style.display='none';
	btn.style.display='none';
	game.play();
}
	

</script>