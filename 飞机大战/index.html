<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Document</title>
	<style type="text/css">
	.fjdx{
		width: 80px;
		height: 80px;
		position: relative;
		top: 800px;
		text-align: center;
		line-height: 80px;
		left: 800px;
		z-index: 123;
	}
	.zd{
		width: 11px;
		height: 50px;
		top: -30px;
		left: 50%;
		margin-left: -7px;
		border-radius: 20px;
		background-image: url(17W58PICfv7_1024.png);
		background-size: 80px;
		background-position:-33px -3px;
		z-index: 123; 
	}
	body{
		margin:0;
		padding:0;
		position: relative;
		overflow: hidden;
	}
	.fj{
		width: 100px;
	}
	.pp1{
		width: 200px;
		height: 50px;
		background-color: black;
		border-radius: 30px;
		color: #fff;
		text-align: center;
		line-height: 50px;
		font-size: 35px;
		position: absolute;
		top: 20px;
		left: 1700px;
		cursor: pointer;
		z-index: 999999;
		box-shadow: 3px 10px 10px #333
	}
	#xuetiao{
		width: 1000px;
		height: 50px;
		background-color:rgba(200,5,5,0.9);
		z-index: 99999;
		position: absolute;
		border-radius: 30px;
		top: 0px;
		left: 0px;
		overflow: hidden;
	}
	.hn1{
		width: 1000px;
		height: 50px;
		background-color: rgba(51,51,51,0.4);
		position: absolute;
		top: 20px;
		left: 100px;
		border-radius: 30px;
		border:5px solid #333;
		z-index: 888;
	}
	.hn{
		width: 5px;
		height: 50px;
		background-color: #000;
		float: left;
		margin-left: 45px;
	}
	.pml1{
		width: 250px;
		height: 40px;
		background-color: rgba(50,50,200,0.6);
		position: absolute;
		top: 20px;
		right: 300px;
		z-index: 888;
		box-shadow: 5px 5px 5px #ccc;
		border-radius: 30px;
		font-size: 30px;
		line-height: 30px;
		font-weight: bold;
		text-align: center;
		padding-top: 10px;
		color: #333;
	}
	.pml2{
		width: 250px;
		height: 50px;
		background-color: rgba(20,200,20,0.6);
		position: absolute;
		top: 80px;
		right: 300px;
		z-index: 888;
		box-shadow: 5px 5px 5px #ccc;
		font-size: 30px;
		font-weight: bold;
		text-align: center;
		line-height: 50px;
		border-radius: 30px;
	}
	.pml3{
		width: 60px;
		height: 120px;
		border-radius: 30px;
		background-color: rgba(200,20,20,0.6);
		position: absolute;
		top: 20px;
		z-index: 888;
		right: 550px;
		text-align: center;
		font-size: 35px;
		font-weight: bold;
	}
	.dmp{
		width: 800px;
		height: 30px;
		background-color: rgba(20,20,220,0.8);
		position: absolute;
		z-index: 888;
		border-radius: 15px;
		overflow: hidden;
	}
	.ddmp{
		width: 800px;
		height: 30px;
		position: absolute;
		left: 130px;
		top: 82px;
		z-index: 888;
		border-radius: 18px;
		border:3px solid #333;
		position: absolute;
		left: 130px;
		top: 82px;
	}
	.hnn1{
		width: 3px;
		height: 30px;
		background-color: #333;
		float: left;
		margin-left: 160px;
	}
	.k2{
		width: 80px;
		height: 60px;
		position: absolute;
		top: 10px;
		left: 15px;
		background-image: url(K.png);
		background-size: 72px;
		background-repeat: no-repeat;
		z-index: 123;
	}
	.k1{
		width: 30px;
		height: 30px;
		background-color: green;
		position: absolute;
		top:80px;
		left: 70px; 
		z-index: 123;
		background-image: url(77e58PIC5gk_1024.jpg);
		background-size: 30px;
		background-repeat: no-repeat;
	}
	.pkl1{
		width: 100%;
		height: 1000px;
		background-color: rgba(0,0,0,0.6);
		position: absolute;
		top: 0px;
		left: 0px;
		z-index: 99999999999;
	}
	.pkl2{
		width: 400px;
		height: 100px;
		background-color: green;
		border-radius: 50px;
		z-index: 9999999999999999999;
		position: absolute;
		border: 10px solid #333;
		text-align: center;
		line-height: 100px;
		font-size: 60px;
		font-weight: bold;
		top: 450px;
		left: 50%;
		margin-left: -200px;
		cursor: pointer;
	}
	.pol1{
		position: absolute;
		display: block;
		z-index: 1;
		top: 0px;
		left: 0px;
	}
	.mlpo123{
		top: 1300px;
	}
	#pml13{
		position: absolute;
		display: block;
		height: 1300px;
		z-index: 1;
		top:2600px;
		left: 0px;
	}
	.kbj1{
		position: absolute;
		width: 100%;
		top: 0px;
		left: 0px;
		z-index: 1;
	}
	</style>
</head>
<body>
	<div class="fjdx">
	<img src="wo.png" class="fj">
</div>
<div class="k2"></div>
<div class="k1"></div>
<div class="pp1">暂停/开始</div>

<div class="hn1">
	<div id="xuetiao">
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
		<div class="hn"></div>
	</div>
</div>
<div class="ddmp">
	<div class="dmp">
		<div class="hnn1"></div>
		<div class="hnn1"></div>
		<div class="hnn1"></div>
		<div class="hnn1"></div>
	</div>
</div>

	<div class="pkl1"></div>
	<div class="pkl2">开始游戏 >></div>
	<div class="pml3">第一关</div>
	<div class="pml1">击落: 0 架敌机</div>
	<div class="pml2">还剩: 20 架敌机</div>
	<div class="kbj1">
		<img src="zhaoqiao.jpg" class="pol1 ml122">
		<img src="zhaoqiao.jpg" class="pol1 ml123">
	</div>
	
</body>
</html>
<script src="jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="animate.js"></script>
<script type="text/javascript">

	
	function fjdz(){
		this.hp=20;
		this.mp=5;
		this.djshuliang=100;
		this.times=0;
		this.djsd=10;
		this.timess=0;
		this.timesss=0;
		this.arr=[];
		this.xuetiao1=document.getElementById('xuetiao');
		this.shadeshu=0;
		this.motiao=document.getElementsByClassName('dmp')[0];
	}
	// 游戏开始，初始化场景
	fjdz.prototype.plays=function(){
		this.dj();
		this.key();
		this.zdf();
		this.djzd();
		this.banduansiwang();
	}
	// 敌机自动来
	fjdz.prototype.dj=function(){
		self=this;
			self.arr[0]=function(){
			var divs=document.createElement('div');
			divs.style.cssText='width:100px;height:100px;position:absolute;background-image:url(di4.png);background-size:100px;z-index:123;';
			var lefts=Math.floor(Math.random()*1800);
			var tops=Math.floor(Math.random()*-100);
			divs.style.top=tops+'px';
			divs.style.left=lefts+'px';
			divs.classList.add('ddjj');
			document.body.appendChild(divs);


			// 敌机销毁界限		
			var xw=document.documentElement.clientHeight;
			var xh=document.documentElement.clientWidth;
			var sd=document.getElementsByClassName('ddjj');
			for(var n=0;n<sd.length;n++){
				if(sd[n].offsetTop>xw){
					document.body.removeChild(sd[n]);
				}
			}
		}
		// 敌机子弹创建
		
		self.arr[2]=function(){
			var ddjj1=document.getElementsByClassName('ddjj');
			for(var i=0;i<ddjj1.length;i++){
				var topss=ddjj1[i].offsetTop;
				ddjj1[i].style.top=topss+self.djsd+'px';
			}
		}
		self.timess=window.setInterval(self.arr[2],50);
		self.times=window.setInterval(self.arr[0],1000);
	}	
	// 敌机自动打自打子弹
	fjdz.prototype.djzd=function(){
		self=this;
		window.setInterval(fnn2,1300);
			function fnn2(){
			var ddjj=document.getElementsByClassName('ddjj');
			for(var i=0;i<ddjj.length;i++){
				var dzd=document.createElement('div');
				dzd.style.cssText='width:11px;height: 50px;background-color:blue;z-index:123;position:absolute;border-radius:15px;background-image: url(17W58PICfv7_1024.png);background-size: 80px;background-position:-33px -3px;'
				var k1=ddjj[i].offsetTop+(ddjj[i].offsetHeight-10);
				var k2=ddjj[i].offsetLeft+(ddjj[i].offsetWidth-62);
				dzd.style.top=k1+10+'px';
				dzd.style.left=k2+10+'px';
				dzd.className='ddddd';
				document.body.appendChild(dzd);
			}

			var xw=document.documentElement.clientHeight;
			var xh=document.documentElement.clientWidth;
			var zdd=document.getElementsByClassName('ddddd');
			for(var n=0;n<zdd.length;n++){
				if(zdd[n].offsetTop>xw){
					document.body.removeChild(zdd[n]);
				}
			}
		}
		// 敌机子弹飞速度
		window.setInterval(fnn3,30);
			function fnn3(){
			var bbbl=document.getElementsByClassName('ddddd');
			for(var j=0;j<bbbl.length;j++){
				var aak=bbbl[j].offsetTop+bbbl[j].offsetHeight;
				bbbl[j].style.top=aak+10+'px';
			}

			// 敌机打中我方的效果
			var	aa1=document.getElementsByClassName('fjdx')[0];
			a3=aa1.offsetTop;
			a4=aa1.offsetLeft;
				for(var b=0;b<bbbl.length;b++){
					var a1=bbbl[b].offsetTop;
					var a2=bbbl[b].offsetLeft;
					if((a1-30<=a3&&a3<=a1)&&(a2-50<=a4&&a4<=a2+50)){
						document.body.removeChild(bbbl[b]);
						// 添加动画效果
						var divsss=document.createElement('div');
						divsss.style.cssText='width:100px;height:300px;display:block;z-index:123;position:absolute';
						divsss.innerHTML='<img src="8701a18b87d6277fa16fdfcc28381f30e824fcc1.jpg">';
						divsss.style.top=a3+'px';
						divsss.style.left=a4+'px';
						document.body.appendChild(divsss);
						window.setTimeout(function(){
							document.body.removeChild(divsss);
						},1100);
						self.hp--;
						var bup=self.xuetiao1.offsetWidth;
						animate(self.xuetiao1,{'width':bup-50});
						console.dir(self.hp+'--------');
					}
			}




		}
	}
	// 按键
	fjdz.prototype.key=function(){
		self=this;
		document.onkeydown=function(e){
			var fj=document.getElementsByClassName('fj')[0];
			var fjdx=document.getElementsByClassName('fjdx')[0];
			var sx=fjdx.offsetTop;
			var zy=fjdx.offsetLeft;
			if(e.keyCode==38){
				fjdx.style.top=sx-60+'px';
			}
			if(e.keyCode==40){
				fjdx.style.top=sx+30+'px';
			}
			if(e.keyCode==37){
				fjdx.style.left=zy-60+'px';
			}
			if(e.keyCode==39){
				fjdx.style.left=zy+30+'px';
			}				
			// 按B键大必杀
			if(e.keyCode==66&&self.mp>0){
				var ghy=document.getElementsByClassName('ddjj');
				for(var i=0;i<ghy.length;i++){
					var a3=ghy[i].offsetTop;
					var a4=ghy[i].offsetLeft;
					document.body.removeChild(ghy[i]);
					var divsss=document.createElement('div');
					divsss.style.cssText='width:100px;height:300px;z-index:123;display:block;position:absolute';
					divsss.innerHTML='<img src="8701a18b87d6277fa16fdfcc28381f30e824fcc1.jpg">';
					divsss.style.top=a3+'px';
					divsss.style.left=a4+'px';
					divsss.className='nju21'
					document.body.appendChild(divsss);
					window.setTimeout(function(){
						var bj10=document.getElementsByClassName('nju21');
						for(var i=0;i<bj10.length;i++){
							document.body.removeChild(bj10[i]);
						}
					},1100);
					
				}
				self.mp--;
				var bhv1=self.motiao.offsetWidth-160;
				animate(self.motiao,{'width':bhv1});
				self.shadeshu+=i;
				var pp123=document.getElementsByClassName('pml1')[0];
				pp123.innerHTML='击落: '+self.shadeshu+' 架敌机';
				self.djshuliang-=i;
				var ghyp1=document.getElementsByClassName('pml2')[0]
				ghyp1.innerHTML='还剩: '+self.djshuliang+' 架敌机';
			}
			// 子弹飞
			if(e.keyCode==88){
				var zd=document.createElement('div');
				zd.style['position']='absolute';
				zd.className='zd';
				var b=fjdx.offsetLeft+fjdx.offsetWidth-40;
				var a=fjdx.offsetTop-fjdx.offsetHeight/3;
				zd.style.left=b+'px';
				zd.style.top=a+'px';
				document.body.appendChild(zd);
			}
		}
	}
	// 我方子弹飞
	fjdz.prototype.zdf=function(){
		self=this;
		// 我方子弹飞
			self.arr[1]=function(){
			var fjdx=document.getElementsByClassName('fjdx')[0];
			var zdz=document.getElementsByClassName('zd');
			var klm=document.getElementsByClassName('ddjj');
			for(var i=0;i<zdz.length;i++){
				var a1=zdz[i].offsetTop;
				var a2=zdz[i].offsetLeft;
				zdz[i].style.top=a1-80+'px';

				// 我方打中敌机的效果
				for(var b=0;b<klm.length;b++){
					var a3=klm[b].offsetTop;
					var a4=klm[b].offsetLeft;
					if((a1-70<=a3&&a3<=a1)&&(a2-100<=a4&&a4<=a2+100)){
						document.body.removeChild(zdz[i]);
						document.body.removeChild(klm[b]);
						// 添加动画效果
						var divsss=document.createElement('div');
						divsss.style.cssText='width:100px;height:300px;z-index:123;display:block;position:absolute';
						divsss.innerHTML='<img src="8701a18b87d6277fa16fdfcc28381f30e824fcc1.jpg">';
						divsss.style.top=a3+'px';
						divsss.style.left=a4+'px';
						document.body.appendChild(divsss);
						window.setTimeout(function(){
							document.body.removeChild(divsss);
						},1100);
						self.shadeshu+=1;
						var pp123=document.getElementsByClassName('pml1')[0];
						pp123.innerHTML='击落: '+self.shadeshu+' 架敌机';
						self.djshuliang-=1;
						var ghyp1=document.getElementsByClassName('pml2')[0]
						ghyp1.innerHTML='还剩: '+self.djshuliang+' 架敌机';
					}
				}
				
			}
			// 我方子弹飞的消失界限
			var xw=document.documentElement.clientHeight;
			var xh=document.documentElement.clientWidth;
			for(var n=0;n<zdz.length;n++){
				if(zdz[n].offsetTop<-100){
					document.body.removeChild(zdz[n]);
				}
			}
		}
		self.timesss=window.setInterval(self.arr[1],80);
	}
	// 判断是否死亡
	fjdz.prototype.banduansiwang=function(){
		self=this;
		flagx=true;

		var mml=window.setInterval(function(){
			document.body.onkeydown=function(e){
			console.dir(e.keyCode);
			if(e.keyCode==80){
				self.hp-=1;
				console.dir(self.hp);
				}
			}
			if(self.hp<=0){
				
				var ka1=document.createElement('div');
				ka1.style.cssText='width:800px;height:300px;background-color:red;border:10px solid #000;font-size:150px;font-weight:bold;text-align:center;line-height:300px;position:absolute;z-index:999999999;margin-left:-400px;';
				ka1.innerHTML='游戏结束';
				ka1.style.top='350px';
				ka1.style.left='50%'
				ka1.className='kas4'
				document.body.appendChild(ka1);
				var ka2=document.createElement('div');
				ka2.style.cssText='width:200px;height:50px;background-color:#000;border:10px solid #000;font-size:45px;text-align:center;border-radius:30px;color:#fff;line-height:50px;position:absolute;z-index:999999999;cursor:pointer;';
				ka2.innerHTML='重新开始';
				ka2.className='kas3'
				ka2.style.top='600px';
				ka2.style.left='1500px'
				document.body.appendChild(ka2);
				window.clearInterval(mml);
				window.clearInterval(self.timess);
				window.clearInterval(self.times);
				window.clearInterval(self.timesss);
				var xxm=document.createElement('div');
				xxm.style.cssText='width:100%;height:1000px;background-color:rgba(51,51,51,0.8);position:absolute;z-index:999px;top:0px;left:0px;'
				xxm.className='asde1';
				document.body.appendChild(xxm);
					// 重新开始
				var mnu1=document.getElementsByClassName('kas3')[0];
				mnu1.onclick=function(){
					var mnu2=document.getElementsByClassName('kas4')[0];
					var asde1=document.getElementsByClassName('asde1')[0];
					document.body.removeChild(mnu1);
					document.body.removeChild(mnu2);
					document.body.removeChild(asde1);
					history.go(0);
				}
			}
			var ppp1=document.getElementsByClassName('pp1')[0];
			ppp1.onclick=function(){
				if(flagx){
					window.clearInterval(self.timess);
					window.clearInterval(self.times);
					window.clearInterval(self.timesss);
					var xxm=document.createElement('div');
					xxm.style.cssText='width:100%;height:1000px;background-color:rgba(51,51,51,0.6);position:absolute;z-index:999px;top:0px;left:0px;'
					xxm.className='asde1';
					document.body.appendChild(xxm);
					flagx=false;
				}else{
					var asde1=document.getElementsByClassName('asde1')[0];
					document.body.removeChild(asde1);
					self.times=window.setInterval(self.arr[0],1000);
					self.timesss=window.setInterval(self.arr[1],80);
					self.timess=window.setInterval(self.arr[2],50);
					flagx=true;
				}
				
			}
			if(self.shadeshu%10==0&&self.mp<5){
				self.mp+=1;
				var klq1=self.motiao.offsetWidth+160;
				animate(self.motiao,{'width':klq1});
			}



			// // 背景轮播
			// var ll12=document.documentElement.clientHeight;
			// var ll13=document.documentElement.clientWidth;
			// var pol11=document.getElementsByClassName('pol1');
			// 两个图走
			// for(var i=0;i<pol11.length;i++){
			// 	var  aa=pol11[i].offsetTop+5;
			// 	pol11[i].style.top=aa+'px';
			// }
			// // 地图复位
			// for(var i=0;i<pol11.length;i++){
			// 	var  aa=pol11[i].offsetTop;
			// 	if(aa>1300){
			// 		pol11[i].style.top=-1300+'px';
			// 	}
			// }
			
		},10);
		// 其他敌机
		// window.setInterval(,);
	}


window.onresize=rr;
function  rr(){
	var pmh=document.documentElement.clientHeight;
	$('.pol1').css({'height':pmh+'px','width':'100%'});
	$('.kbj1').css({'height':pmh+'px','background-color':'red'});
}
rr();
// var inu=0;
// var inux=0;
// window.setInterval(function(){
// 	inux++;
// 	if(inux>=$('.pol1').length){
// 		inux=0;
// 	}
// 	$($('.pol1')[inux]).css({'top':'-100%'});
// 	$($('.pol1')[inu]).animate({'top':'100%'},500);
// 	$($('.pol1')[inux]).animate({'top':'0px'},500);
// 	inu=inux;
// },1000);






	var obj=new fjdz();
	var  pkl1=document.getElementsByClassName('pkl1')[0];
	var  pkl2=document.getElementsByClassName('pkl2')[0];
	pkl2.onclick=function(){
			obj.plays();
			pkl2.style.display='none';
			pkl1.style.display='none';
	}
	

	
</script>


