<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Document</title>
	<style type="text/css">
		*{
			margin: 0;
			padding:0;
		}
		body{
			background-color: #333;
			overflow: hidden;
		}
		.p1{







			width: 700px;
			height: 700px;
			background-color: #000;
			margin: 29px auto;
			border-top: 1px solid #000;
			border-left: 1px solid #000;
		}
		.p2{
			width: 9px;
			height: 9px;
			background-color: #fff;
			margin-bottom: 1px;
			margin-right: 1px;
			float: left;
		}
		#pk2{
			width: 250px;
			height: 80px;
			background-color: #fff;
			font-size: 50px;
			text-align: center;
			position: absolute;
			bottom: 50px;
			left: 150px;
			line-height: 80px;
			font-weight: bold;
			border-radius: 50px;
			cursor: pointer;
		}
		#pk1{
			width: 250px;
			height: 80px;
			background-color: #fff;
			font-size: 50px;
			text-align: center;
			position: absolute;
			bottom: 50px;
			left: 1200px;
			line-height: 80px;
			font-weight: bold;
			border-radius: 50px;
			cursor: pointer;
			color: red;
		}
	</style>
</head>
<body>
	<div class="p1"></div>
	<div id="pk2">开始游戏</div>
	<div id="pk1">暂停</div>
</body>
</html>
<script type="text/javascript">
	
function huashe(){
	this.she=[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:0,y:4},{x:0,y:5}];
	this.dbox=document.getElementsByClassName('p1')[0];
	this.bb=0;
	this.dirs=39;
	this.chide=0;
	this.flagxxs=false;
}
huashe.prototype.plays=function(){
	this.chushi();
	this.zou();
	this.autos();
	this.jiashiwu();
}

// 初始化场景
huashe.prototype.chushi=function(){
	for(var i=0;i<70;i++){
		for(var j=0;j<70;j++){
			var divs=document.createElement('div');
			divs.id=i+'-'+j;
			divs.classList.add('p2');
			this.dbox.appendChild(divs);
		}
	}
	for(var i=0;i<this.she.length;i++){
		document.getElementById(this.she[i].x+'-'+this.she[i].y).style['background-color']='blue';
	}
	document.getElementById(this.she[this.she.length-1].x+'-'+this.she[this.she.length-1].y).style['background-color']='red';
}
// 按键盘
huashe.prototype.zou=function(){
	self=this;
	document.body.onkeydown=function(e){
		// 方向锁死
		if(Math.abs(e.keyCode-self.dirs)==2){
			return;
		}
		self.dirs=e.keyCode;
		// 按键
			if(e.keyCode==39){
				var b=self.she[self.she.length-1];
				var newb={x:b.x,y:b.y+1};
			}
			if(e.keyCode==37){
				var b=self.she[self.she.length-1];
				var newb={x:b.x,y:b.y-1};
			}
			if(e.keyCode==38){
				var b=self.she[self.she.length-1];
				var newb={x:b.x-1,y:b.y};
			}
			if(e.keyCode==40){
				var b=self.she[self.she.length-1];
				var newb={x:b.x+1,y:b.y};
			}

			for(var i=0;i<self.she.length;i++){
				if(self.she[i].x==newb.x &&self.she[i].y==newb.y){
					alert('你输了');
					window.clearInterval(self.bb);
				}
			}
		for(var i=0;i<self.she.length;i++){
			for(var j=0;j<self.chide.length;j++){
				if(self.she[i].x==self.chide[j].x&&self.she[i].y==self.chide[j].y){
					flagxxs=true;
				}else{
					flagxxs=false;
				}
			}
		}
			if(flagxxs){
				self.chide=null;
				self.she.push(newb);
				self.zaihua();
				self.jiashiwu();
			}else{
				self.she.push(newb);
				var nm=self.she.shift();
				self.zaihuashang(nm);
				self.zaihua();
			}
	}
	var pk1=document.getElementById('pk1');
	pk1.onclick=function(){
			window.clearInterval(self.bb);
		}

}
// 删除蛇尾部
huashe.prototype.zaihuashang=function(nm){
	document.getElementById(nm.x+'-'+nm.y).style['background-color']='#fff';
}
// 重画蛇身
huashe.prototype.zaihua=function(){
	for(var i=0;i<this.she.length;i++){
		document.getElementById(this.she[i].x+'-'+this.she[i].y).style['background']='blue';
		// document.getElementById(this.she[i].x+'-'+this.she[i].y).style['background-color']='red';
	}
	document.getElementById(this.she[this.she.length-1].x+'-'+this.she[this.she.length-1].y).style['background-color']='red';
	
}
 // 撞墙判断
 huashe.prototype.zhuangqian=function(){
 	if(0>this.she[this.she.length-1].y||69<this.she[this.she.length-1].y||0>this.she[this.she.length-1].x||69<this.she[this.she.length-1].x){
 		alert('蛇已经死了');
 		window.clearInterval(this.bb);
 		return true;
 	}
 	return false;
 }
// 自动调用
huashe.prototype.autos=function(){
	self=this;
	self.bb=window.setInterval(function(){
		self.zhuangqian();
		if(self.she[self.she.length-1].x==self.she[self.she.length-2].x){
			if(self.she[self.she.length-1].y>self.she[self.she.length-2].y){
				var b=self.she[self.she.length-1];
				var newb={x:b.x,y:b.y+1};
			}else{
				var b=self.she[self.she.length-1];
				var newb={x:b.x,y:b.y-1};
			}
		}else if(self.she[self.she.length-1].y==self.she[self.she.length-2].y){
			if(self.she[self.she.length-1].x>self.she[self.she.length-2].x){
				var b=self.she[self.she.length-1];
				var newb={x:b.x+1,y:b.y};
			}else{
				var b=self.she[self.she.length-1];
				var newb={x:b.x-1,y:b.y};
			}
		}

		for(var i=0;i<self.she.length;i++){
				if(self.she[i].x==self.chide.x&&self.she[i].y==self.chide.y){
					flagxxs=true;
				}else{
					flagxxs=false;
				}
			}
			if(flagxxs){
				self.chide=null;
				self.she.push(newb);
				self.zaihua();
				self.jiashiwu();
			}else{
				self.she.push(newb);
				var nm=self.she.shift();
				self.zaihuashang(nm);
				self.zaihua();
			}
			

	},80);
}
//创建食物
huashe.prototype.jiashiwu=function(){
	self=this;
	 // window.setInterval(function(){
		var range1=Math.floor(Math.random()*69+1);
		var range2=Math.floor(Math.random()*69+1);
		
		for(var i=0;i<self.she.length;i++){
			if(self.she[i].x==range1&&self.she[i].y==range2){
				range1=Math.floor(Math.random()*69+1);
				range2=Math.floor(Math.random()*69+1);
				i=0;
			}
		}
		var a=Math.floor(Math.random()*255);
		var b=Math.floor(Math.random()*255);
		var c=Math.floor(Math.random()*255);
		document.getElementById(range1+'-'+range2).style['background']='rgb('+a+','+b+','+c+')';
		self.chide={x:range1,y:range2};
		
		
	 // },1000);
}




var huashe=new huashe();
var pk2=document.getElementById('pk2');
var bianlian=true;
pk2.onclick=function(){
		huashe.plays();
	
}


</script>


