<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Document</title>
	<style>
	
	</style>
</head>
<body>
	<canvas id='can'>
		你的浏览器不能使用，建议尽快升级。
	</canvas>
</body>
</html>
<script>
	var can=document.querySelector('#can');
	var o=can.getContext('2d');
	can.width='1000';
	can.height='600';
	can.style.border='1px solid red';
	o.translate(500,300);
	var imgs;
	var num=36;
	var se=0;
	var str1='';
	var t2,t3;
	o.moveTo(0,0);
	o.lineTo(0,-250);
	o.stroke();

	var t1=window.setInterval(fn,10);
	function fn(){
		o.clearRect(-can.width/2,-can.height/2,can.width,can.height);
		o.moveTo(0,0);
		o.lineTo(0,-250);
		o.stroke();
		var bfb=num/100;
		var angle=Math.floor(360*bfb);
		se+=1;
		var cs=Math.floor(se/360*100);
		var str=cs+'%';
		str1=str;
		// 终止条件
		if(se>=angle){
			se=angle;
			var num2=30;
			// o.lineTo(0,0);
			// o.stroke();
			fn1(se,num2);
			window.clearInterval(t1);
		}
		o.beginPath();
		o.strokeStyle='#000';
		o.lineWidth=10;
		o.arc(0,0,250,-Math.PI/2,-Math.PI/2+Math.PI/180*se,0);
		o.font='90px 宋体';
		o.textAlign='center';
		o.textBaseline='middle';
		o.fillText(str,105,-100);
		o.lineTo(0,0)
		o.stroke();
		o.closePath();

	}

	function fn1(se1,num2){
		var sss=se1;
		var bfb=num2/100;
		var angle=Math.floor(360*bfb);
		se1+=1;
		var cs=Math.floor(se1/360*100);
		var str=cs+'%';
		str1=str;
		// 终止条件
		if(se1>=angle){
			se1=angle;
			var num3=34;
			fn2(sss,se1,num3);
			window.clearInterval(t2);
		}
		o.beginPath();
		o.strokeStyle='#000';
		o.lineWidth=10;
		o.arc(0,0,250,-Math.PI/2+Math.PI/180*sss,-Math.PI/2+Math.PI/180*sss+Math.PI/180*se1,0);
		o.font='90px 宋体';
		o.textAlign='center';
		o.textBaseline='middle';
		o.fillText(str,-65,100);
		o.lineTo(0,0);
		o.stroke();
		o.closePath();
		// var t2=window.setTimeout(fn1);
	}


	function fn2(gs,se2,num3){
		var sss=se2;
		var bfb=num3/100;
		var angle=Math.floor(360*bfb);
		se2+=1;
		var cs=Math.floor(se2/360*100);
		var str=cs+'%';
		str1=str;
		// 终止条件
		if(se2>=angle){
			se2=angle;
			alert(se2);
		}
		o.beginPath();
		o.strokeStyle='#000';
		o.lineWidth=10;
		o.arc(0,0,250,-Math.PI/2+Math.PI/180*gs+Math.PI/180*sss,-Math.PI/2+Math.PI/180*gs+Math.PI/180*sss+Math.PI/180*se2,0);
		o.font='90px 宋体';
		o.textAlign='center';
		o.textBaseline='middle';
		o.fillText(str,-105,-100);
		o.lineTo(0,0);
		o.stroke();
		o.closePath();
	}
</script>